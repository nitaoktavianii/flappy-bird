Name: Deploy-Flappy-Bird
SchemaVersion: 1.0

Triggers:
  - Type: Push
    Branches:
      - main

Actions:
  Build:
    Identifier: aws/build@v1
    Inputs:
      Sources:
        - WorkflowSource
    Configuration:
      Steps:
        - Run: echo "Building Flappy Bird game..."
        - Run: mkdir dist
        - Run: cp -r * dist/
    Outputs:
      Artifacts:
        - Name: buildOutput
          Files:
            - dist/**

  Deploy:
    Identifier: aws/build@v1
    Inputs:
      Artifacts:
        - buildOutput
    Configuration:
      Steps:
        - Run: aws s3 sync dist s3://nita-flappybird-demo --delete
